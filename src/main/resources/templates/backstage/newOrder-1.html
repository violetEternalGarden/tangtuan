<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>投保信息</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1"/>
    <meta name="author" content="zhy"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css"/>
    <link rel="stylesheet" href="css/public.css"/>
    <link rel="stylesheet" href="css/newOrder.css"/>
    <!--[if lte IE 9]>
    <script src="js/respond.min.js"></script>
    <script src="js/html5shiv.js"></script>
    <![endif]-->
    <!--[if IE]>
    <script src="http://libs.baidu.com/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->
    <style>
        .newOrderP {
            width: 140px;
            line-height: 36px;
        }
    </style>
</head>
<body>
<div class="bx-header">
    <div class="pull-left">
        <img src="images/" alt="">
    </div>
    <div class=" pull-right head-nav-right soging-photes-active">
        <div class="head-nav-userName">
            张三
            <i class="head-nav-icon"></i>
        </div>
        <div class="soging-photes-display after ">
            <a href="javascript:;" class="after">
                张三李四王麻子
            </a>
            <a href="javascript:;" class="after">
                张三李四王麻子
            </a>
        </div>
    </div>
</div>
<div class="bx-content">
    <!--导航手风琴-->
    <div class="bx-mean">
        <ul id="accordion" class="accordion">
            <li>
                <a class="link" href="index.html">
                    <i class="glyphicon glyphicon-home" style="margin-top: 4px;float: left;margin-right: 14px;"></i>
                    运营数据
                </a>
            </li>
            <li>
                <div class="link">
                    <i class="bx-icon bx-icon1"></i>
                    订单管理
                </div>
                <ul class="submenu">
                    <li><a href="orderList.html">订单列表</a></li>
                    <li><a href="newOrder.html">新建订单</a></li>
                    <li><a href="commissionSettlement.html">佣金结算</a></li>
                </ul>
            </li>
            <li>
                <a class="link" href="basicManagement.html">
                    <i class="bx-icon bx-icon2"></i>
                    渠道管理
                </a>
            </li>
            <li>
                <div class="link">
                    <i class="bx-icon bx-icon3"></i>
                    费用政策管理
                </div>
                <ul class="submenu">
                    <li><a href="junction.html">结入费用</a></li>
                    <li><a href="bear.html">结出费用</a></li>
                    <li><a href="spareCost.html">备用费用结出</a></li>
                </ul>
            </li>
            <li><div class="link">
                <i class="bx-icon bx-icon4"></i>
                客户管理
            </div>
                <ul class="submenu">
                    <li><a href="customerInformation.html">客户信息列表</a></li>
                    <li><a href="contacts.html">联系人列表</a></li>
                </ul>
            </li>
            <li><div class="link">
                <i class="bx-icon bx-icon5"></i>
                管理员设置

            </div>
                <ul class="submenu">
                    <li><a href="role.html"> 角色管理</a></li>
                    <li><a href="user.html"> 用户管理</a></li>
                </ul>
            </li>
            <li><div class="link">
                <i class="bx-icon bx-icon6"></i>
                财务结算
            </div>
                <ul class="submenu">
                    <li><a href="financialSettlement.html">财务结算总览表</a></li>
                    <li><a href="insuranceCompany.html">保险公司财务结算</a></li>
                    <li><a href="intermediary.html">中介公司财务结算</a></li>
                    <li><a href="member.html">会员财务结算</a></li>
                    <li><a href="otherchannels.html">其他渠道财务结算</a></li>
                    <li><a href="downstreamChannel.html">下游渠道财务结算</a></li>
                </ul>
            </li>
            <li><div class="link">
                <i class="bx-icon bx-icon7"></i>
                报表分析
            </div>
                <ul class="submenu">
                    <li><a href="orderTime.html">下单时间分析报表</a></li>
                    <li><a href="singleChannel.html">下单渠道分析报表</a></li>
                    <li><a href="lowerArea.html">下单地区分析报表</a></li>
                    <li><a href="bxbaobiao.html">保险公司分析报表</a></li>
                </ul>
            </li>
            <li>
                <a class="link" href="jurisdiction.html">
                    <i class="bx-icon bx-icon5"></i>
                    权限管理
                </a>
            </li>
        </ul>
    </div>
    <!--视图区-->
    <div class="bx-sideright">
        <!--视图区导航-->
        <div class="bx-siderightTit after">
            <p class="orderListP">
                订单管理
                <i class="glyphicon glyphicon-chevron-right"></i>
            </p>
            <p class="orderListP">
                新建订单
            </p>
        </div>
        <div class="orderCommit">
            <div class="orderListNum">
                新建订单
            </div>
            <div class="newOrderCont ">
                <div class="newOrderTit">
                    投保信息
                </div>
                <!--车主信息-->
                <div class="newOrderContTit">
                    车主信息
                </div>
                <div class="row newOrderControw">
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            车主信息：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            车主证件类型：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <select name="" id="">
                                <option value="1">星座</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            车主证件号码：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            车主联系电话：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>

                </div>
                <!--投保人信息-->
                <div class="newOrderContTit">
                    <p class="pull-left">
                        投保人信息
                    </p>
                    <div class="pull-right">
                        <label for="">
                            <input type="checkbox" />
                            投保人信息是否与车主信息一致
                        </label>
                    </div>
                </div>
                <div class="row newOrderControw">
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            投保人信息：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            投保人证件类型：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <select name="" >
                                <option value="1">星座</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            投保人证件号码：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            投保人联系电话：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                </div>
                <!--被保险人信息-->
                <div class="newOrderContTit">
                    <p class="pull-left">
                        被保险人信息
                    </p>
                    <div class="pull-right">
                        <label for="">
                            <input type="checkbox" />
                            被保险人信息是否与车主信息一致
                        </label>
                    </div>
                </div>
                <div class="row newOrderControw">
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            被保险人信息：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            被保险人证件类型：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <select name="" >
                                <option value="1">星座</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            被保险人证件号码：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            被保险人联系电话：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                </div>
                <!--权益索赔人信息-->
                <div class="newOrderContTit">
                    <p class="pull-left">
                        权益索赔人信息
                    </p>
                    <div class="pull-right">
                        <label for="">
                            <input type="checkbox" />
                            权益索赔人信息是否与车主信息一致
                        </label>
                    </div>
                </div>
                <div class="row newOrderControw">
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            权益索赔人信息：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            权益索赔人证件类型：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <select name="" >
                                <option value="1">星座</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            权益索赔人证件号码：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            权益索赔人联系电话：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text">
                        </div>
                    </div>
                </div>
                <!--被保人证件照片-->
                <div class="newOrderContTit">
                    被保人证件照片
                </div>
                <div class="row newOrderControw newOrderControwPhoto text-center">
                    <div class="col-lg-6 col-md-6 col-sm-24 col-xs-24">
                        <div class="newOrderPhotoImg">
                            <img src="images/" alt="">
                            <input type="file" capture="camera" accept="image/*" id="cameraInput" name="cameraInput" class="sign_file" onchange="start_upload(this)">
                        </div>
                        <p class="newOrderPhotoP">
                            身份证正面
                        </p>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-24 col-xs-24">
                        <div class="newOrderPhotoImg">
                            <img src="" alt="">
                            <input type="file" capture="camera" accept="image/*" id="cameraInput1" name="cameraInput" class="sign_file" onchange="start_upload(this)">
                        </div>
                        <p class="newOrderPhotoP">
                            身份证反面
                        </p>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-24 col-xs-24">
                        <div class="newOrderPhotoImg">
                            <img src="" alt="">
                            <input type="file" capture="camera" accept="image/*" id="cameraInput2" name="cameraInput" class="sign_file" onchange="start_upload(this)">
                        </div>
                        <p class="newOrderPhotoP">
                            行驶证正本
                        </p>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-24 col-xs-24">
                        <div class="newOrderPhotoImg">
                            <img src="" alt="">
                            <input type="file" capture="camera" accept="image/*" id="cameraInput3" name="cameraInput" class="sign_file" onchange="start_upload(this)">
                        </div>
                        <p class="newOrderPhotoP">
                            行驶证副本
                        </p>
                    </div>

                </div>
                <!--配送信息-->
                <div class="newOrderContTit">
                    配送信息
                </div>
                <div class="row newOrderControw">
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            配送方式：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <select name="" >
                                <option value="1">中通</option>
                                <option value="2">快递</option>
                                <option value="3">韵达</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            收件人姓名：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text" placeholder="请输入收件人姓名" />
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            收件人手机号码：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text" placeholder="收件人手机号码" />
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-24 col-xs-24">
                        <p class="pull-left newOrderP">
                            收件地址：
                        </p>
                        <div class="pull-left newOrderinpuuBox">
                            <input type="text" placeholder="收件地址">
                        </div>
                    </div>
                </div>
                <div class="newComputerBtnBox newComputerBtns">
                    <p class="newComputerBtnPrev" style="margin: auto 80px auto auto">
                        上一步
                    </p>
                    <p class="newComputerBtn" style="margin: auto auto auto 0 ">
                        下一步
                    </p>

                </div>
            </div>
        </div>
    </div>
</div>


<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/public.js"></script>
<script>
    /*点击图片触发*/
    function start_upload(obj) {
        $this = $(obj)
        if(!isCanvasSupported) {
            console.log("2222");
        } else {
            compress(event, function(base64Img) {
                $this.parents(".newOrderPhotoImg").find("img").attr("src", base64Img)
                //						$("#csimg").attr("src", base64Img);
            });
        }
    }

    //判断是否存在画布
    function isCanvasSupported() {
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }

    //压缩方法
    function compress(event, callback) {
        if(typeof(FileReader) === 'undefined') {
            console.log("当前浏览器内核不支持base64图标压缩");
            //调用上传方式  不压缩
        } else {
            try {
                var file = event.currentTarget.files[0];
                if(!/image\/\w+/.test(file.type)) {
                    alert("请确保文件为图像类型");
                    return false;
                }
                var reader = new FileReader();
                reader.onload = function(e) {
                    var image = $('<img/>');
                    image.load(function() {
                        console.log("开始压缩");
                        var square = this.width;
                        var canvas = document.createElement('canvas');
                        canvas.width = square;
                        canvas.height = this.height;
                        var context = canvas.getContext('2d');
                        context.clearRect(0, 0, this.width, this.height);
                        var imageWidth = this.width;
                        var imageHeight = this.height;
                        var offsetX = 0;
                        var offsetY = 0;
                        // 将canvas的透明背景设置成白色
                        var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                        for(var i = 0; i < imageData.data.length; i += 4) {
                            // 当该像素是透明的，则设置成白色
                            if(imageData.data[i + 3] == 0) {
                                imageData.data[i] = 255;
                                imageData.data[i + 1] = 255;
                                imageData.data[i + 2] = 255;
                                imageData.data[i + 3] = 255;
                            }
                        }
                        context.putImageData(imageData, 0, 0);
                        console.log(this.width)
                        console.log(this.height)
                        //                        if (this.width > this.height) {
                        ////                            imageWidth = Math.round(square * this.width / this.height);
                        ////                            imageHeight = square;
                        ////                            offsetX = - Math.round((imageWidth - square) / 2);
                        //                            alert(1)
                        //                        } else {
                        //                            imageHeight = Math.round(square * this.height / this.width);
                        //                            imageWidth = square;
                        //                            offsetY = - Math.round((imageHeight - square) / 2);
                        //                            alert(2)
                        //                        }
                        context.drawImage(this, offsetX, offsetY, imageWidth, imageHeight);

                        var data = canvas.toDataURL('image/jpeg');
                        //压缩完成执行回调
                        callback(data);
                    });
                    image.attr('src', e.target.result);
                };
                reader.readAsDataURL(file);
            } catch(e) {
                console.log("压缩失败!");
                //调用上传方式  不压缩
            }
        }
    }
</script>
</body>
</html>